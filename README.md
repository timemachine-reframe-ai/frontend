# 🕰️ TIMEMACHINE AI – 프론트엔드

과거의 아쉬운 대화를 다시 경험하고, **13,234개의 상담 데이터**를 바탕으로 전문 심리상담사 같은 조언을 받는 React 앱입니다.

---

## 🚀 빠른 시작

```bash
cd frontend
npm install
npm run dev
```

브라우저에서 http://localhost:3000 접속

---

## 📁 프로젝트 구조

```
src/
├── features/
│   ├── auth/          → 로그인/회원가입
│   ├── home/          → 홈 화면 + 가이드
│   ├── input/         → 📝 상황 입력 (5단계)
│   ├── simulation/    → 💬 AI 채팅
│   ├── report/        → 📊 리포트 화면
│   ├── diary/         → 📔 일기장
│   └── reflection/
│       └── hooks/useReflectionApp.ts  → 전역 상태 관리
│
├── shared/
│   ├── services/
│   │   ├── geminiService.ts   → 채팅/리포트 API
│   │   └── authService.ts     → 인증 API
│   └── types.ts               → 타입 정의
│
└── assets/            → 이미지/아이콘
```

---

## 🔄 앱 흐름

```
┌──────────────┐     ┌──────────────┐     ┌──────────────┐     ┌──────────────┐
│  📝 입력     │ →   │  💬 시뮬레이션 │ →   │  📊 리포트   │ →   │  📔 저장     │
│  (5단계)     │     │  (AI 채팅)    │     │  (분석)      │     │  (일기장)    │
└──────────────┘     └──────────────┘     └──────────────┘     └──────────────┘
```

### 5단계 입력

1. **무슨 일이 있었나요?** → `whatHappened`
2. **어떤 감정을 느꼈나요?** → `emotions` + `emotionIntensity`
3. **무엇을 했거나 못했나요?** → `whatYouDid`
4. **어떻게 되길 바랐나요?** → `howYouWishItHadGone`
5. **상대방 정보** → `personaName`, `personaTone`, `personaPersonality`

---

## 📦 핵심 타입

```typescript
interface Reflection {
  id: string;
  whatHappened: string; // 상황
  emotions: Emotion[]; // 감정
  whatYouDid: string; // 행동
  howYouWishItHadGone: string; // 바랐던 결과
  personaName: string; // 상대방 이름
  personaTone: string; // 말투
  personaPersonality: string; // 성격
  conversation: Message[]; // 대화 기록
  report: Report | null; // 리포트
}

interface Report {
  summary: string;
  keyInsights: string[];
  suggestedPhrases: string[];
  counselorAdvice?: string; // 💙 심리상담사 조언 (RAG 기반)
  psychologicalNote?: string; // 심리학적 분석
  encouragement?: string; // 격려 메시지
}
```

---

## 🎬 시연 시나리오 (최적화된 예시)

RAG 데이터 분포 기반 최적 시나리오 (직장/취업 56%, 두려움 76%)

### 📝 입력 정보

**Step 1 - 상황:**

```
오늘 팀 회의에서 내가 준비한 기획안을 발표했는데,
팀장님이 다른 팀원들 앞에서 "이게 기획이야? 대학생 과제 수준이네"라고 말씀하셨어요.
너무 창피하고 억울했는데 아무 말도 못하고 그냥 "수정하겠습니다"라고만 했어요.
```

**Step 2 - 감정:** 억울함, 분노, 두려움 (강도 8/10)

**Step 3 - 행동:**

```
아무 반박도 못하고 그냥 수정하겠다고만 했어요.
분명히 나름대로 열심히 준비했고 논리적인 근거도 있었는데,
그 자리에서는 머리가 하얘져서 아무 말도 못했어요.
```

**Step 4 - 바랐던 결과:**

```
내 기획안의 의도와 근거를 차분하게 설명하고,
어떤 부분이 부족한지 구체적인 피드백을 요청했으면 좋겠어요.
상처받지 않으면서도 프로페셔널하게 대응하고 싶었어요.
```

**Step 5 - 상대방:**

- 이름: `김팀장님`
- 말투: `직설적이고 권위적`
- 성격: `결과 중심적이고 까다롭지만, 일 잘하는 사람은 인정해주는 편`

### 💬 대화 예시 (10턴)

| Turn | 나                                                                   | 김팀장님                                               |
| ---- | -------------------------------------------------------------------- | ------------------------------------------------------ |
| 1    | "팀장님, 아까 회의 때 말씀하신 부분에 대해 조금 더 여쭤봐도 될까요?" | "응, 뭔데? 기획안 수정할 거 있어?"                     |
| 2    | "어떤 부분이 구체적으로 부족했는지 알고 싶어서요."                   | "핵심이 안 보여. 그래서 뭘 해야 한다는 건지가 없잖아." |
| 3    | "결론 부분이 약했다는 말씀이시군요."                                 | "기획안은 제안서야. 네 건 보고서에 가까웠어."          |
| 4    | "솔직히 '대학생 과제 수준'이라고 하셨을 때 좀 당황스러웠어요."       | "...그랬나? 내가 좀 세게 말했나."                      |
| 5    | "이런 피드백은 따로 말씀해주시면 더 잘 받아들일 수 있을 것 같아요."  | "그래, 내가 생각이 짧았네."                            |
| 6    | "저도 앞으로는 핵심을 더 명확하게 정리해서 가져올게요."              | "네가 열심히 한 건 알아. 기획자는 세일즈맨이기도 해."  |
| 7    | "참고하면 좋을 만한 기획안 예시가 있을까요?"                         | "작년 마케팅팀 리브랜딩 기획안 한번 봐."               |
| 8    | "수정안 초안 나오면 먼저 검토 요청드려도 될까요?"                    | "그래, 목요일까지 초안 가져와봐."                      |
| 9    | "오늘 따로 시간 내주셔서 감사합니다."                                | "아까 말투는 다음부터 조심할게."                       |
| 10   | "네, 열심히 해볼게요!"                                               | "(살짝 미소) 그래, 수고해."                            |

### 🎯 이 시나리오의 장점

- **RAG 최적화**: 직장 갈등 + 두려움/억울함 → 유사 사례 다수
- **자연스러운 전개**: 감정 표현 → 피드백 요청 → 상호 이해
- **리포트 품질**: 권위적 관계에서의 자기표현, I-message 활용

### 🎥 시연 팁

1. 입력 단계: 천천히, 감정이 담긴 것처럼 타이핑
2. 채팅 중: 1~2초 정도 생각하는 듯한 텀 두기
3. 리포트: 스크롤하면서 "심리상담사의 조언" 섹션 강조

---

## 🛠️ npm 스크립트

| 명령              | 설명                              |
| ----------------- | --------------------------------- |
| `npm run dev`     | 개발 서버 (http://localhost:3000) |
| `npm run build`   | 프로덕션 빌드                     |
| `npm run preview` | 빌드 결과 미리보기                |

---

## 🔧 환경 변수

```bash
# .env
VITE_BACKEND_URL=http://localhost:8000
```

---

## 🆕 최근 업데이트 (2025.11.30)

| 기능                 | 설명                                          |
| -------------------- | --------------------------------------------- |
| **심리상담사 조언**  | 리포트에 RAG 기반 전문 상담사 조언 표시       |
| **사용자 이름 호칭** | 회원가입 시 입력한 이름으로 조언에서 호칭     |
| **마크다운 제거**    | 핵심 인사이트에서 `**텍스트**` 형식 자동 제거 |
| **격려 메시지**      | 리포트 하단에 따뜻한 격려 메시지 표시         |
